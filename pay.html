<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»˜æ¬¾èªªæ˜ | ä¸€å‘³çƒé­šå­</title>
    <link rel="icon" type="image/png" href="image/logo.png">

    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">

    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: #f9f9f9;
            color: #333;
            line-height: 1.6;
        }

        header {
            background: #fff;
            padding: 1rem 5%;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            text-align: center;
            font-size: 1.4rem;
            font-weight: 700;
        }

        .container {
            max-width: 720px;
            margin: 3rem auto;
            background: #fff;
            padding: 2.5rem;
        }

        h2 {
            margin-bottom: 1.5rem;
            font-weight: 400;
            text-align: center;
        }

        .block {
            margin-bottom: 2rem;
        }

        .block h3 {
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
            border-left: 4px solid #000;
            padding-left: 0.5rem;
        }

        .info p {
            margin: 0.3rem 0;
        }

        .pay-box {
            background: #f7f7f7;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .highlight {
            font-weight: 700;
        }

        .pay-link {
            display: inline-block;
            margin-top: 1rem;
            padding: 12px 20px;
            font-weight: 700;
            text-decoration: none;
            color: #fff;
        }

        .linepay-link { background: #00c300; }
        .paypal-link { background: #0070ba; }

        .btn-finish {
            display: block;
            width: 100%;
            margin-top: 2.5rem;
            padding: 14px;
            background: #000;
            color: #fff;
            border: none;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
        }

        .note {
            margin-top: 1.5rem;
            color: #666;
            font-size: 0.95rem;
            line-height: 1.7;
        }
    </style>
</head>

<body>

<header>ä»˜æ¬¾èªªæ˜</header>

<div class="container">
    <h2>è«‹ä¾ä¸‹æ–¹æŒ‡ç¤ºå®Œæˆä»˜æ¬¾</h2>

    <!-- è¨‚å–®è³‡è¨Š -->
    <div class="block info" id="order-info"></div>

    <!-- ä»˜æ¬¾æ–¹å¼ -->
    <div class="block">
        <h3>ä»˜æ¬¾æ–¹å¼</h3>
        <div class="pay-box" id="pay-info"></div>
    </div>

    <!-- æé†’ -->
    <div class="note">
        <p>ğŸ“Œ ä»˜æ¬¾å®Œæˆå¾Œï¼Œè«‹åŠ å…¥å®˜æ–¹ LINE ä¸¦å‚³é€ä»¥ä¸‹è³‡è¨Šï¼š</p>
        <p>âœ” ä»˜æ¬¾æˆªåœ–</p>
        <p>âœ” è¨‚è³¼äººå§“å</p>
        <p>âœ” æ‰‹æ©Ÿè™Ÿç¢¼</p>
        <p>âœ” è¶…å•†é–€å¸‚ï¼ˆè‹¥ç‚ºè¶…å•†å–è²¨ï¼‰</p>
    </div>

    <button class="btn-finish" onclick="finishOrder()">æˆ‘å·²å®Œæˆä»˜æ¬¾</button>
</div>

<script>
const order = JSON.parse(localStorage.getItem("orderInfo"));

if (!order) {
    alert("æŸ¥ç„¡è¨‚å–®è³‡æ–™ï¼Œè«‹é‡æ–°ä¸‹å–®");
    window.location.href = "cart.html";
}

const orderInfoDiv = document.getElementById("order-info");
const payInfoDiv = document.getElementById("pay-info");

// ğŸ”´ æ”¹æˆä½ è‡ªå·±çš„ PayPal.me åç¨±
const paypalAccount = "captureworks";

orderInfoDiv.innerHTML = `
    <h3>è¨‚å–®è³‡è¨Š</h3>
    <p><span class="highlight">å§“åï¼š</span>${order.name}</p>
    <p><span class="highlight">æ‰‹æ©Ÿï¼š</span>${order.phone}</p>
    <p><span class="highlight">å–è²¨æ–¹å¼ï¼š</span>${order.shipType === "store" ? "è¶…å•†å–è²¨" : "å®…é…"}</p>
    ${
        order.shipType === "store"
        ? `<p><span class="highlight">è¶…å•†é–€å¸‚ï¼š</span>${order.storeType}ï½œ${order.storeName}</p>`
        : ""
    }
    <p><span class="highlight">å•†å“å°è¨ˆï¼š</span>NT$ ${order.subtotal}</p>
    <p><span class="highlight">é‹è²»ï¼š</span>NT$ ${order.shippingFee}</p>
    <p><span class="highlight">è¨‚å–®ç¸½é‡‘é¡ï¼š</span>NT$ ${order.total}</p>
`;

if (order.payType === "bank") {

    payInfoDiv.innerHTML = `
        <p class="highlight">éŠ€è¡Œè½‰å¸³</p>
        <p>éŠ€è¡Œä»£ç¢¼ï¼š700</p>
        <p>å¸³è™Ÿï¼š03012900181248</p>
        <p>æˆ¶åï¼šä¸€å‘³çƒé­šå­</p>
    `;

} else if (order.payType === "linepay") {

    payInfoDiv.innerHTML = `
        <p class="highlight">LINE Pay ä»˜æ¬¾ï¼ˆäººå·¥ç¢ºèªï¼‰</p>
        <p>è«‹å…ˆåŠ å…¥å®˜æ–¹ LINEï¼Œæˆ‘å€‘å°‡æä¾› LINE Pay æ”¶æ¬¾æ–¹å¼ã€‚</p>
        <a class="pay-link linepay-link" href="https://lin.ee/EdwlwIok" target="_blank">
            åŠ å…¥å®˜æ–¹ LINE
        </a>
    `;

} else if (order.payType === "paypal") {

    const paypalUrl = `https://www.paypal.me/${paypalAccount}/${order.total}`;

    payInfoDiv.innerHTML = `
        <p class="highlight">PayPal ä»˜æ¬¾</p>
        <p>é»æ“Šä¸‹æ–¹æŒ‰éˆ•ä½¿ç”¨ PayPal ä»˜æ¬¾</p>
        <a class="pay-link paypal-link" href="${paypalUrl}" target="_blank">
            ä½¿ç”¨ PayPal ä»˜æ¬¾ NT$ ${order.total}
        </a>
        <p style="margin-top:0.8rem;color:#666;">
            ğŸ“Œ è«‹æ–¼ PayPal å‚™è¨»å¡«å¯«ã€Œè¨‚è³¼äººå§“åï¼‹æ‰‹æ©Ÿå¾Œä¸‰ç¢¼ã€
        </p>
    `;
}

function finishOrder() {
    // æ­¤é ä¸æ¸… cartï¼Œç­‰ success.html å†æ¸…
    window.location.href = "success.html";
}
</script>

</body>
</html>
